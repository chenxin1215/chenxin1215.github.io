---
title: 虚拟机安装与网络配置
date: 2023-09-03 20:12:04
tags:
    - 虚拟机
categories: 编程必备
---

### 准备工作
#### vm软件
软件官网下载地址：[https://customerconnect.vmware.com/cn/downloads/#all_products](https://customerconnect.vmware.com/cn/downloads/#all_products)
windows版本：搜索workstation
![img](image1.png)

许可证：YF390-0HF8P-M81RQ-2DXQE-M2UT6

mac版本：搜索fusion
![img](image2.png)

#### 镜像文件
centos镜像下载地址：[http://mirrors.aliyun.com/centos/7/isos/x86_64/](http://mirrors.aliyun.com/centos/7/isos/x86_64/)
![img](image3.png)

### 一、创建虚拟机，以centos为例

1. 新建虚拟机 选择自定义

![img](image4.png)

2. 硬盘兼容性 选择默认即可

![img](image5.png)

3. 装客户机操作系统 选择稍后安装（因为tfwf要在虚拟机安装完成之后，把不需要的硬件删除，所以选择稍后安装操作系统）

![img](image6.png)

4. 选择客户机操作系统 选择linux -> CentOS 7 64位； 注意对应下载的镜像文件版本

![img](image7.png)

5. 命名虚拟机、位置； 最好把位置放在一个同一的文件夹

![img](image8.png)

6. 处理器配置（注意不能超过主机的核心数）

![img](image9.png)

7. 内存配置，一般配置2G既可，如果需要安装Gitlab、jenkins之类的 必须增大内存

![img](image10.png)

8. 网络配置 选择桥接网络（虚拟机可以与主机使用同一网络）

![img](image11.png)

9. 选择I/O控制器类型 默认选项； 磁盘类型 默认选项

![img](image12.png)
![img](image13.png)

10. 选择磁盘 -> 创建新的磁盘

![img](image14.png)

11. 指定磁盘容量（这里是最大容量 虚拟的 不占主机内存）

![img](image15.png)

12. 指定磁盘文件（最好不使用中文）

![img](image16.png)

13. 自定义硬件  移除USB控制器、声卡、打印机（这样启动快一点）

![img](image17.png)
![img](image18.png)

14. 安装镜像

![img](image19.png)
![img](image20.png)

15. 开始安装虚拟机系统

![img](image21.png)
![img](image22.png)
![img](image23.png)

16. 设置时区

![img](image24.png)
![img](image25.png)

17. 系统分区

![img](image26.png)
![img](image27.png)

18. 配置本机地址

![img](image28.png)
![img](image29.png)

19. 设置root管理员密码

![img](image30.png)
![img](image31.png)
![img](image32.png)

20. 重启后出现这个页面 代表安装成功， 使用root账号登录即可

![img](image33.png)
### 二、搭建VMnet8虚拟局域网
![img](image34.png)

打开VMware软件，点击编辑，点击列表中的虚拟网络编辑器
![img](image35.png)

进入虚拟网络编辑器页面

- 选择NAT模式
- 勾选将主机虚拟适配器连接到此网络
- 取消DHCP服务

![img](image36.png)

子网IP和网关IP都先记下来
![img](image37.png)

### 三、CentOS系统配置
#### 网络配置
##### 1、配置ip地址等信息在/etc/sysconfig/network-scripts/ifcfg-ens33
![img](image38.png)
> vi   /etc/sysconfig/network-scripts/ifcfg-ens33/

配置如下：（若原文件无引号，则不加引号，没有的就新增）
```
    TYPE="Ethernet"   # 网络类型为以太网
    BOOTPROTO="static"  # 手动分配ip
    NAME="ens33"  # 网卡设备名，设备名一定要跟文件名一致
    DEVICE="ens33"  # 网卡设备名，设备名一定要跟文件名一致
    ONBOOT="yes"  # 该网卡是否随网络服务启动
    IPADDR="192.168.×.×"  # 该网卡ip地址就是你要配置的固定IP
    GATEWAY="192.168.×.×"   # 网关
    NETMASK="255.255.255.0"   # 子网掩码
    DNS1="8.8.8.8"    # DNS，8.8.8.8为Google提供的免费DNS服务器的IP地址
```
![img](image39.png)

##### 2 、配置网络工作
    在/etc/sysconfig/network文件里增加如下配置
    NETWORKING=yes
##### 3、配置公共DNS服务(可选)（不用选）
    在/etc/resolv.conf文件里增加如下配置
    nameserver 8.8.8.8
##### 4、关闭防护墙
    systemctl stop firewalld # 临时关闭防火墙
    systemctl disable firewalld # 禁止开机启动
##### 5、重启网络服务
    service network restart
##### 6、查看网络服务
    ping 163.com
没有问题就可以使用服务器连接工具连接虚拟机了
### 四、连接虚拟机
使用刚刚配置的网卡ip地址 （IPADDR）
![img](image40.png)

![img](image41.png)
接下来就可以愉快的使用啦！
