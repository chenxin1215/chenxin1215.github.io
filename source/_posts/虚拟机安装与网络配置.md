---
title: 虚拟机安装与网络配置
date: 2023-09-03 20:12:04
tags:
    - 虚拟机
categories: 编程必备
sticky: 60
---
<meta name="referrer" content="no-referrer"/>

### 准备工作
#### vm软件
软件官网下载地址：[https://customerconnect.vmware.com/cn/downloads/#all_products](https://customerconnect.vmware.com/cn/downloads/#all_products)
windows版本：搜索workstation
![image.png](https://cdn.nlark.com/yuque/0/2023/png/29411486/1692691373344-344c49a1-5917-44b3-a034-2ca289e0c8d0.png#averageHue=%23fdfcfc&clientId=u9825aa6a-e58d-4&from=paste&height=805&id=sAEpl&originHeight=805&originWidth=1771&originalType=binary&ratio=1&rotation=0&showTitle=false&size=114094&status=done&style=none&taskId=u253efc1c-881f-48e2-8196-e4e1d951c90&title=&width=1771)
许可证：YF390-0HF8P-M81RQ-2DXQE-M2UT6

mac版本：搜索fusion
![image.png](https://cdn.nlark.com/yuque/0/2023/png/29411486/1692691473572-6b13e519-96e8-4b54-ba87-e17c26d787dd.png#averageHue=%23fcfcfc&clientId=u9825aa6a-e58d-4&from=paste&height=745&id=ubf79069b&originHeight=745&originWidth=1804&originalType=binary&ratio=1&rotation=0&showTitle=false&size=108898&status=done&style=none&taskId=ua63696c9-bb9c-44ee-ba92-6aff2d2201e&title=&width=1804)

#### 镜像文件

centos镜像下载地址：[http://mirrors.aliyun.com/centos/7/isos/x86_64/](http://mirrors.aliyun.com/centos/7/isos/x86_64/)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/29411486/1692756238871-fc30b912-6403-46f5-ac88-8774a4825bb5.png#averageHue=%23fbf8f6&clientId=ud4ab4805-1f05-4&from=paste&height=812&id=u8c76ba13&originHeight=812&originWidth=1136&originalType=binary&ratio=1&rotation=0&showTitle=false&size=99013&status=done&style=none&taskId=u3b5959e0-0ed9-4ea5-b3bf-3c6e4f284c3&title=&width=1136)

### 一、创建虚拟机，以centos为例

1. 新建虚拟机 选择自定义

![image.png](https://cdn.nlark.com/yuque/0/2023/png/29411486/1692756352606-f58c7801-2110-4376-a1ce-1323af61f982.png#averageHue=%23e2e1e1&clientId=ud4ab4805-1f05-4&from=paste&height=455&id=r7JBH&originHeight=455&originWidth=518&originalType=binary&ratio=1&rotation=0&showTitle=false&size=34479&status=done&style=none&taskId=ufb994087-38b8-437b-8f77-d90eaf140d6&title=&width=518)

2. 硬盘兼容性 选择默认即可

![image.png](https://cdn.nlark.com/yuque/0/2023/png/29411486/1692756417917-2306242b-3dbd-4e2f-b8bf-1daab077b149.png#averageHue=%23ebebeb&clientId=ud4ab4805-1f05-4&from=paste&height=424&id=u6f8ad3e9&originHeight=424&originWidth=500&originalType=binary&ratio=1&rotation=0&showTitle=false&size=21147&status=done&style=none&taskId=u389d412b-fb06-43c5-8fa0-8282b7a7498&title=&width=500)

3. 装客户机操作系统 选择稍后安装（因为tfwf要在虚拟机安装完成之后，把不需要的硬件删除，所以选择稍后安装操作系统）

![image.png](https://cdn.nlark.com/yuque/0/2023/png/29411486/1692756478156-9f56a5f7-4767-4762-97f1-c1e40a3b22b3.png#averageHue=%23e5e5e5&clientId=ud4ab4805-1f05-4&from=paste&height=443&id=ud86d3f40&originHeight=443&originWidth=503&originalType=binary&ratio=1&rotation=0&showTitle=false&size=23090&status=done&style=none&taskId=uedeffcb9-ebad-4d1b-bd10-40f2efd35be&title=&width=503)

4. 选择客户机操作系统 选择linux -> CentOS 7 64位； 注意对应下载的镜像文件版本

![image.png](https://cdn.nlark.com/yuque/0/2023/png/29411486/1692756608075-340e1611-a438-45e0-a423-49bf1946e32b.png#averageHue=%23cac9c8&clientId=ud4ab4805-1f05-4&from=paste&height=618&id=udf187c3c&originHeight=618&originWidth=591&originalType=binary&ratio=1&rotation=0&showTitle=false&size=50002&status=done&style=none&taskId=u107d371e-22cf-4d48-8790-4e7c3c1206c&title=&width=591)

5. 命名虚拟机、位置； 最好把位置放在一个同一的文件夹

![image.png](https://cdn.nlark.com/yuque/0/2023/png/29411486/1692756774172-d6ad7d65-368c-4168-be0a-b6c9605babaa.png#averageHue=%23e8e8e8&clientId=ud4ab4805-1f05-4&from=paste&height=432&id=u4745b407&originHeight=432&originWidth=512&originalType=binary&ratio=1&rotation=0&showTitle=false&size=17884&status=done&style=none&taskId=u88cfb5a8-56d4-4db4-bba6-f2afe61c61c&title=&width=512)

6. 处理器配置（注意不能超过主机的核心数）

![image.png](https://cdn.nlark.com/yuque/0/2023/png/29411486/1692756835449-5ab8a05b-3270-46bd-a0d2-8366d1382d1a.png#averageHue=%23e7e6e6&clientId=ud4ab4805-1f05-4&from=paste&height=439&id=ucb0fd00f&originHeight=439&originWidth=509&originalType=binary&ratio=1&rotation=0&showTitle=false&size=16517&status=done&style=none&taskId=u911ac449-636b-4f13-a204-9c6a4fa2481&title=&width=509)

7. 内存配置，一般配置2G既可，如果需要安装Gitlab、jenkins之类的 必须增大内存

![image.png](https://cdn.nlark.com/yuque/0/2023/png/29411486/1692756948099-cdc16b3c-e48b-47a7-838f-276f4d76de2c.png#averageHue=%23dddddd&clientId=ud4ab4805-1f05-4&from=paste&height=443&id=u93824469&originHeight=443&originWidth=523&originalType=binary&ratio=1&rotation=0&showTitle=false&size=26662&status=done&style=none&taskId=ud8aef763-5383-4dba-b979-eb7e9d07a8b&title=&width=523)

8. 网络配置 选择桥接网络（虚拟机可以与主机使用同一网络）

![image.png](https://cdn.nlark.com/yuque/0/2023/png/29411486/1692757010368-4ea50611-414b-4771-a843-21958e939019.png#averageHue=%23e8e8e7&clientId=ud4ab4805-1f05-4&from=paste&height=433&id=u96a51dc5&originHeight=433&originWidth=499&originalType=binary&ratio=1&rotation=0&showTitle=false&size=22276&status=done&style=none&taskId=udd00f65f-b87f-4e13-a5b6-358340b1e37&title=&width=499)

9. 选择I/O控制器类型 默认选项； 磁盘类型 默认选项

![image.png](https://cdn.nlark.com/yuque/0/2023/png/29411486/1692757330880-2c87a3b5-4fda-4a88-8a38-78ea4c254336.png#averageHue=%23e3e3e2&clientId=ud4ab4805-1f05-4&from=paste&height=436&id=u10c11d93&originHeight=436&originWidth=515&originalType=binary&ratio=1&rotation=0&showTitle=false&size=19977&status=done&style=none&taskId=u92eaaccb-91c2-458a-9e54-90c08e22c95&title=&width=515)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/29411486/1692757364285-982a3c0a-27be-427e-82a4-2ada1aab1995.png#averageHue=%23d0d0d0&clientId=ud4ab4805-1f05-4&from=paste&height=476&id=uc16cb689&originHeight=476&originWidth=532&originalType=binary&ratio=1&rotation=0&showTitle=false&size=21357&status=done&style=none&taskId=u8578458a-d9d5-4c17-a6f2-62572597ebb&title=&width=532)

10. 选择磁盘 -> 创建新的磁盘

![image.png](https://cdn.nlark.com/yuque/0/2023/png/29411486/1692757397431-31d0ca20-6b19-4f14-95e2-bf75548efdb0.png#averageHue=%23e6e6e6&clientId=ud4ab4805-1f05-4&from=paste&height=427&id=u5fcbad2d&originHeight=427&originWidth=501&originalType=binary&ratio=1&rotation=0&showTitle=false&size=21641&status=done&style=none&taskId=u4d26c419-ef3a-4a5f-b606-609ec57949a&title=&width=501)

11. 指定磁盘容量（这里是最大容量 虚拟的 不占主机内存）

![image.png](https://cdn.nlark.com/yuque/0/2023/png/29411486/1692757517842-1e04c8da-a97d-4743-851e-a270cd41e674.png#averageHue=%23e6e6e6&clientId=ud4ab4805-1f05-4&from=paste&height=434&id=uacaaaea4&originHeight=434&originWidth=492&originalType=binary&ratio=1&rotation=0&showTitle=false&size=25112&status=done&style=none&taskId=u65b73872-f7df-4f56-b107-64088be01e6&title=&width=492)

12. 指定磁盘文件（最好不使用中文）

![image.png](https://cdn.nlark.com/yuque/0/2023/png/29411486/1692757569255-086b7860-3056-4aee-85bf-7bfc4ac9a5e1.png#averageHue=%23e6e5e5&clientId=ud4ab4805-1f05-4&from=paste&height=435&id=uf4d9e356&originHeight=435&originWidth=516&originalType=binary&ratio=1&rotation=0&showTitle=false&size=18697&status=done&style=none&taskId=u6fe2515c-e0db-4eec-813d-dbc84505c95&title=&width=516)

13. 自定义硬件  移除USB控制器、声卡、打印机（这样启动快一点）

![image.png](https://cdn.nlark.com/yuque/0/2023/png/29411486/1692757630601-21cf6370-902d-4918-a441-f95e534c6fe9.png#averageHue=%23dcdbdb&clientId=ud4ab4805-1f05-4&from=paste&height=449&id=u9338bbd1&originHeight=449&originWidth=530&originalType=binary&ratio=1&rotation=0&showTitle=false&size=27062&status=done&style=none&taskId=u48f293da-a3c4-41a5-88e5-c589112035d&title=&width=530)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/29411486/1692757662161-9202f9ae-6967-43e1-a6e5-68f1e8652cad.png#averageHue=%23f1f1f1&clientId=ud4ab4805-1f05-4&from=paste&height=598&id=u095b09f0&originHeight=796&originWidth=752&originalType=binary&ratio=1&rotation=0&showTitle=false&size=54348&status=done&style=none&taskId=u731c9e1b-ce22-40b2-9ff3-acbbd631a4d&title=&width=565)

14. 安装镜像

![image.png](https://cdn.nlark.com/yuque/0/2023/png/29411486/1692757759341-24c8478a-d2d2-4acf-a3a2-1fa447295637.png#averageHue=%23242323&clientId=ud4ab4805-1f05-4&from=paste&height=601&id=u0915cb44&originHeight=601&originWidth=601&originalType=binary&ratio=1&rotation=0&showTitle=false&size=38484&status=done&style=none&taskId=u603323c3-435e-4e31-a180-19ca7b7c3ef&title=&width=601)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/29411486/1692757814456-31841fa5-d66c-487b-9869-d7e98ef15bf1.png#averageHue=%23f7f7f7&clientId=ud4ab4805-1f05-4&from=paste&height=457&id=PBur7&originHeight=506&originWidth=723&originalType=binary&ratio=1&rotation=0&showTitle=false&size=32557&status=done&style=none&taskId=ud11103b9-b7d0-4098-8b55-ddcbeef7862&title=&width=653)

15. 开始安装虚拟机系统

![image.png](https://cdn.nlark.com/yuque/0/2023/png/29411486/1692757852711-95b1d75c-31c2-45af-9194-6d9d71e8d220.png#averageHue=%23282727&clientId=ud4ab4805-1f05-4&from=paste&height=561&id=ua3b01147&originHeight=561&originWidth=529&originalType=binary&ratio=1&rotation=0&showTitle=false&size=35247&status=done&style=none&taskId=uddab1787-4b0e-4975-bb80-9e231ed459f&title=&width=529)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/29411486/1692757894889-d1ae543f-8c29-4d96-97ec-f2d1e207e8d2.png#averageHue=%23000000&clientId=ud4ab4805-1f05-4&from=paste&height=440&id=u6e79ec94&originHeight=480&originWidth=640&originalType=binary&ratio=1&rotation=0&showTitle=false&size=14004&status=done&style=none&taskId=u12ab609f-ec6c-4462-848a-7356e07ac36&title=&width=587)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/29411486/1692758035707-54c92663-7731-4bac-8423-f2c5620d70f6.png#averageHue=%23e7e7e5&clientId=ud4ab4805-1f05-4&from=paste&height=467&id=u90766f42&originHeight=600&originWidth=800&originalType=binary&ratio=1&rotation=0&showTitle=false&size=150063&status=done&style=none&taskId=u8cca104e-456c-4099-b911-3a894138085&title=&width=623)

16. 设置时区

![image.png](https://cdn.nlark.com/yuque/0/2023/png/29411486/1692758119352-4d040f83-8e72-4926-a5f7-990258804e52.png#averageHue=%23e7e7e6&clientId=ud4ab4805-1f05-4&from=paste&height=485&id=qcOpH&originHeight=600&originWidth=800&originalType=binary&ratio=1&rotation=0&showTitle=false&size=149336&status=done&style=none&taskId=ub4a84186-1af3-4650-ac28-ed12c72a904&title=&width=647)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/29411486/1692758162479-84d15c62-4fee-4b86-b684-2298e053dfa5.png#averageHue=%23abd68c&clientId=ud4ab4805-1f05-4&from=paste&height=485&id=L7ts4&originHeight=600&originWidth=800&originalType=binary&ratio=1&rotation=0&showTitle=false&size=205111&status=done&style=none&taskId=ubbc9df8a-2e24-44c1-af2f-3aed2765ffd&title=&width=647)

17. 系统分区

![image.png](https://cdn.nlark.com/yuque/0/2023/png/29411486/1692758263370-e865289e-a96d-4f01-98c6-4a4660a61496.png#averageHue=%23e7e7e6&clientId=ud4ab4805-1f05-4&from=paste&height=479&id=asK4g&originHeight=600&originWidth=800&originalType=binary&ratio=1&rotation=0&showTitle=false&size=151154&status=done&style=none&taskId=u2a95224d-03c0-43bc-a1ad-e734136622e&title=&width=639)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/29411486/1692758315297-e6865dcc-9d4d-4630-a7c5-ac6a6975e5da.png#averageHue=%23e6e6e5&clientId=ud4ab4805-1f05-4&from=paste&height=497&id=RENq2&originHeight=600&originWidth=800&originalType=binary&ratio=1&rotation=0&showTitle=false&size=109163&status=done&style=none&taskId=u60c8cb93-fa41-403b-8c9f-0e976d9ca4c&title=&width=663)

18. 配置本机地址

![image.png](https://cdn.nlark.com/yuque/0/2023/png/29411486/1692758649051-47360b5e-6cd2-4c06-9406-7ca9164df577.png#averageHue=%23e7e7e6&clientId=ud4ab4805-1f05-4&from=paste&height=496&id=Rdxlo&originHeight=600&originWidth=800&originalType=binary&ratio=1&rotation=0&showTitle=false&size=155525&status=done&style=none&taskId=udff9233a-0629-4588-8cd8-8ddd645c579&title=&width=661)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/29411486/1692758631854-5dead794-7105-443c-8a46-effc480bd54d.png#averageHue=%23e6e6e5&clientId=ud4ab4805-1f05-4&from=paste&height=500&id=Gka9w&originHeight=600&originWidth=800&originalType=binary&ratio=1&rotation=0&showTitle=false&size=105334&status=done&style=none&taskId=u92b30da0-75eb-4747-bde0-2b5b3055738&title=&width=667)

19. 设置root管理员密码

![image.png](https://cdn.nlark.com/yuque/0/2023/png/29411486/1692758806904-1600c7cb-fae7-4c27-a190-fe418f4718c7.png#averageHue=%23e7e7e6&clientId=ud4ab4805-1f05-4&from=paste&height=474&id=u7651fd6e&originHeight=600&originWidth=800&originalType=binary&ratio=1&rotation=0&showTitle=false&size=156206&status=done&style=none&taskId=ud24778ea-3305-4961-88ff-8b4dc02e6d2&title=&width=632)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/29411486/1692758828437-56244938-7ea5-4260-9a83-83cf9d888d0a.png#averageHue=%23e7e7e6&clientId=ud4ab4805-1f05-4&from=paste&height=476&id=ubd62b643&originHeight=600&originWidth=800&originalType=binary&ratio=1&rotation=0&showTitle=false&size=243302&status=done&style=none&taskId=udac717b9-3616-494f-abae-02a520af264&title=&width=635)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/29411486/1692758864273-e9e53966-8541-4e16-a029-1677013f2c34.png#averageHue=%23e7e7e6&clientId=ud4ab4805-1f05-4&from=paste&height=268&id=u71d1fcf0&originHeight=327&originWidth=803&originalType=binary&ratio=1&rotation=0&showTitle=false&size=65785&status=done&style=none&taskId=u270b790f-b48f-4eb9-9c24-74c805148f5&title=&width=659)

20. 重启后出现这个页面 代表安装成功， 使用root账号登录即可

![image.png](https://cdn.nlark.com/yuque/0/2023/png/29411486/1692761553268-62da89de-f571-486d-a8ed-c6425ad85251.png#averageHue=%230e0e0e&clientId=ud4ab4805-1f05-4&from=paste&height=252&id=u5d9f1b22&originHeight=285&originWidth=775&originalType=binary&ratio=1&rotation=0&showTitle=false&size=15227&status=done&style=none&taskId=u9de6e016-6e8a-4326-8abd-060d0269d4d&title=&width=685)

### 二、搭建VMnet8虚拟局域网

![](https://cdn.nlark.com/yuque/0/2023/png/29411486/1683093100772-7a709c27-105c-41e6-948f-2de9625bbed3.png#averageHue=%23f2eded&clientId=ud910ff7d-582c-4&from=paste&id=u6d5185fb&originHeight=738&originWidth=839&originalType=url&ratio=1.25&rotation=0&showTitle=false&status=done&style=none&taskId=u8a2cd8ae-8d3a-4ec9-a594-20b05a8d8de&title=)
打开VMware软件，点击编辑，点击列表中的虚拟网络编辑器
![](https://cdn.nlark.com/yuque/0/2023/png/29411486/1683093109246-ad98ee25-0826-43e2-b916-ed9a7a33555c.png#averageHue=%23474746&clientId=ud910ff7d-582c-4&from=paste&id=ufebd50d5&originHeight=712&originWidth=1003&originalType=url&ratio=1.25&rotation=0&showTitle=false&status=done&style=none&taskId=u7d994692-94fd-4170-9b93-54558f1dfb9&title=)
进入虚拟网络编辑器页面

- 选择NAT模式
- 勾选将主机虚拟适配器连接到此网络
- 取消DHCP服务

![](https://cdn.nlark.com/yuque/0/2023/png/29411486/1683093128021-de0c4d22-7691-401e-9968-a83db1d88e5d.png#averageHue=%23e9e6e5&clientId=ud910ff7d-582c-4&from=paste&id=ue544ecf8&originHeight=666&originWidth=730&originalType=url&ratio=1.25&rotation=0&showTitle=false&status=done&style=none&taskId=ucd1c18ea-3d9b-41fa-ac09-2469d2072f8&title=)
子网IP和网关IP都先记下来
![](https://cdn.nlark.com/yuque/0/2023/png/29411486/1683093136080-e7f194e8-4b32-4aa4-8e4d-4bcc33e19dcf.png#averageHue=%23ecebeb&clientId=ud910ff7d-582c-4&from=paste&id=u2c21878d&originHeight=712&originWidth=638&originalType=url&ratio=1.25&rotation=0&showTitle=false&status=done&style=none&taskId=ufcbe4730-6786-4de2-9a5a-2074ecf9467&title=)

### 三、CentOS系统配置

#### 网络配置

##### 1、配置ip地址等信息在/etc/sysconfig/network-scripts/ifcfg-ens33

![](https://cdn.nlark.com/yuque/0/2023/png/29411486/1683093183867-5ebab915-207c-4d89-9841-2873a598f955.png#averageHue=%23070707&clientId=ud910ff7d-582c-4&from=paste&id=u5c3a3c90&originHeight=141&originWidth=765&originalType=url&ratio=1.25&rotation=0&showTitle=false&status=done&style=none&taskId=udc6979c2-aeab-4958-beba-0a0dbe2b117&title=)

> vi   /etc/sysconfig/network-scripts/ifcfg-ens33/

配置如下：（若原文件无引号，则不加引号，没有的就新增）
```shell
    TYPE="Ethernet"   # 网络类型为以太网
    BOOTPROTO="static"  # 手动分配ip
    NAME="ens33"  # 网卡设备名，设备名一定要跟文件名一致
    DEVICE="ens33"  # 网卡设备名，设备名一定要跟文件名一致
    ONBOOT="yes"  # 该网卡是否随网络服务启动
    IPADDR="192.168.×.×"  # 该网卡ip地址就是你要配置的固定IP
    GATEWAY="192.168.×.×"   # 网关
    NETMASK="255.255.255.0"   # 子网掩码
    DNS1="8.8.8.8"    # DNS，8.8.8.8为Google提供的免费DNS服务器的IP地址
```
![image.png](https://cdn.nlark.com/yuque/0/2023/png/29411486/1692771063105-74ba114d-b886-4bb9-8bd5-52d658b044f4.png#averageHue=%23121212&clientId=ud4ab4805-1f05-4&from=paste&height=630&id=uff692fd5&originHeight=630&originWidth=867&originalType=binary&ratio=1&rotation=0&showTitle=false&size=38378&status=done&style=none&taskId=ub211bb01-4e6b-45ff-924d-38de51006c7&title=&width=867)

##### 2 、配置网络工作

    在/etc/sysconfig/network文件里增加如下配置
    NETWORKING=yes

##### 3、配置公共DNS服务(可选)（不用选）

    在/etc/resolv.conf文件里增加如下配置
    nameserver 8.8.8.8

##### 4、关闭防护墙

    systemctl stop firewalld # 临时关闭防火墙
    systemctl disable firewalld # 禁止开机启动

##### 5、重启网络服务

    service network restart

##### 6、查看网络服务

    ping 163.com
    没有问题就可以使用服务器连接工具连接虚拟机了

### 四、连接虚拟机

使用刚刚配置的网卡ip地址 （IPADDR）
![image.png](https://cdn.nlark.com/yuque/0/2023/png/29411486/1692771094821-4e5af1a7-c0f3-4f82-ab3e-a1697cbd708c.png#averageHue=%23f1f0ef&clientId=ud4ab4805-1f05-4&from=paste&height=648&id=u55955869&originHeight=648&originWidth=877&originalType=binary&ratio=1&rotation=0&showTitle=false&size=91375&status=done&style=none&taskId=u444a14da-cf64-407e-9962-7cc328e5668&title=&width=877)

![image.png](https://cdn.nlark.com/yuque/0/2023/png/29411486/1692771113507-07d99108-c2c4-47a5-84ce-cd6c47ffd2b1.png#averageHue=%2392e19b&clientId=ud4ab4805-1f05-4&from=paste&height=641&id=u637ebde9&originHeight=641&originWidth=1018&originalType=binary&ratio=1&rotation=0&showTitle=false&size=450283&status=done&style=none&taskId=u56c78db3-be2f-4439-b583-76b43f83cd6&title=&width=1018)
接下来就可以愉快的使用啦！